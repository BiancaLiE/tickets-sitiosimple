<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel de Tickets</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>
<body class="bg-light">

<div class="container mt-5">
  <h1 class="mb-4">ðŸ§¾ Tickets recibidos</h1>

  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>#</th>
        <th>Fecha</th>
        <th>Cliente</th>
        <th>Total</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="tickets-body">
      <!-- Se llena con JS -->
    </tbody>
  </table>
</div>

<script>
  fetch("/tickets")
    .then(res => res.json())
    .then(tickets => {
      const tbody = document.getElementById("tickets-body");

      tickets.forEach(t => {
        const tr = document.createElement("tr");

        tr.innerHTML = `
          <td>${t.pedidoId}</td>
          <td>${new Date(t.fecha).toLocaleString()}</td>
          <td>${t.cliente.email}</td>
          <td>$${t.total}</td>
          <td>${t.estado}</td>
        `;

        tbody.appendChild(tr);
      });
    });
</script>

</body>
</html>
